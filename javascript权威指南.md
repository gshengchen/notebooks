# 1.Javascript概述
Javasscript是面向Web编程语言，它是一门高端的、动态的、弱类型的编程语言。javascript语言核心针对文本、数组、日期、正则表达式的操作定义很少API，没有提供输入输出操作功能。输入输出功能在javascript宿主环境提供。
# 2.词法结构
## 2.1 字符集
javascript是用Unicode字符集编写的。
### 2.1.1 区分大小写
Javascript是区分大小写的编程语言。由于html不区分大小写，它的标签、属性和javascript对象、属性同名，在javascript必须是小写。
### 2.1.2 空格、换行符和格式控制符
javascript会忽略程序中标识（token）之间的空格（包括空格、制表、水平、垂直等），多数情况下，同样会忽略换行符。
javascript除了空格符（\\u0020），还可以识别以下表示空格的字符：水平制表符（\\u0009）、垂直制表符（\\u000B）、换页符（\\u000C）、不中断空白（\\u00A0）、字节序标记（\\uFEFF），以及unicode中所有Zs类别的字符。换行符（\\u000A）、回车符（\\u000D）、行分隔符（\\u2028）、段分隔符（\\u2029）都为行结束符。
unicode格式控制符（CF类），不能用在标识符中。但，零宽连接符（\\u200D)、非零宽连接符（\\uFEFF）可以用在标识符中，不能作为首字符。
### 2.1.3 Unicode转义序列
Unicode转义序列以\\u为前缀，其后跟4个16进制数。这种写法可以用在关键字的其他地方。如"caf\\u00E9"。
### 2.1.4 标准化
unicode允许使用多种方法对同一个字符进行编码，显示结果一样，但二进制编码不一样。Unicode标准为所有字符定义一个首选的编码格式，javascript不会进行标准化处理。
## 2.2注释
单行注释：//
一段注释：/\*... \*/
## 2.3直接量
直接量就是程序中直接使用的程序值。
```html
12 //数字
1.2//小数
"hello" // 字符串
'hi' //另一个字符串
true // 布尔值
false // 布尔值
/javascript/gi //正则表达式
null //空
{x:1,y:2} //对象
{1,2,3,4} //数组
```  
## 2.4标识符与保留字
标识符用来对变量和函数进行命名，或者用作循环语句中的跳转位置的标记。它必须字母、下划线或$开始，后续字符可以是字母、数字、下划线或$。合法的标识符：
```html
i
my_variable_name
v13
_dumy
$str
```
保留字：

|关键字|关键字|关键字|关键字|关键字|
|--|--|--|--|--|
|break|delete|function|return|typeof|
|case|do|if|switch|var|
|catch|else|in|this|void|
|continue|false|instanceof|throw|while|
|debugger|finally|new|true|with|
|default|for|null|try||

ECMAscript保留的关键字：
class、const、enum、export、extends、import、super。
在严格模式下的保留关键字：
implements、let、private、public、yield、interface、package、protected、static、arguments、eval。
ECMAscript 3 将所有的java的关键字都列为保留字。javascript具体实现与运行环境同时预定义很多全局变量和函数，应当尽量避免使用它。如：arguments、encodeURI、Infinity、Number、RegExp、Array、encodeURIComponent、isFinite、Object、String、Boolean、Error、isNan、parseFloat、SyntaxError、Date、eval、JSON、parseInt、TypeError、decodeURI、EvalError、Math、RangerError、undefined、decodeURIComponent、Function、Nan、ReferenceError、URIError。
## 2.5 可选的分号
分号是可选的。return、continue、break和随后表达式不能换行。
# 3.类型、值和变量
计算机程序的运行需要对值（value）进行操作，能够表示并操作的值的类型称为数据类型（type），变量是值的符号名称，可以通过名称来获得值的引用。javascript的数据类型分为两类：原始类型（primitive type）和对象类型（object type）。
- 原始类型（primitive type）：包括数字、字符串、布尔值。
- 特殊原始值：null、undefined，它们代表各自特殊类型的唯一值。
- 对象类型（object type）：除了原始类型、null、undefined之外就是对象类型，他是属性（property）的集合，每个属性都由”名/值“对构成。普通对象（object）是”命名值“的无序集合，数组是javascript表示带编号的有序集合的特殊对象，函数也是javascript特殊对象。  

如果函数用来初始化（使用new）一个新建对象，称为构造函数。每个构造函数定义了一类（class）对象，类可以看做对象类型的子类型。javascript定义了Function、Array、Date、RegExp、Error类，还可以通过定义自己的构造函数来定义所需要的类。  
javascript是一种面向对象的语言，数据类型可以定义方法来使用值，除了null、undefined。  
javascript也可分为拥有方法的类型和不能拥有方法的类型。同样可以分为可变类型（mutable）和不可变类型（immutable）。  
数字、字符串、布尔值、null、undefined是不可变类型。对象是可变类型。  
javascript变量是无类型的（untyped），变量可以赋予任何值，使用var来声明。
## 3.1 数字
javascript不区分整型和浮点数值，所有数都用64位浮点格式来表示，然而，在实际操作中如数组、位操作使用32位整数。
### 3.1.1 整型直接量
用一个数字序列表示十进制整数，以“0x”、“0X”为前缀来表示十六进制，以“0”为前缀表示八进制（ECMAScript标准不支持，部分实现支持）。
### 3.1.2 浮点型直接量
语法表示：
[digits][.digit][(E|e)[(+|-)]ddigits]
### 3.1.3 javascript中的运算符
使用语言本身的算术运算符来进行数字运算：+、-、\*、/、%等。  
也可以使用Math对象进行复杂运算：
```html
Math.pow(2,53); // 求2的53次幂
Math.round(0.6); // 四舍五入
Math.ceil(0.6); //向上求整
Math.floor(0.6); //向下求整
Math.abs(-5); //绝对值
Math.max(x,y,z);
Math.min(x,y,z);
Math.random(); // 0~1之间的随机数
Math.PI;
Math.E;
Math.sqrt(3);//平方根
Math.log(100)/Math.LN10 ; //以10为底100的对数
Math.log(512)/Math.LN2; //以2为底512的对数
Math.exp(3);//e的三次幂
```
算术运算在溢出（overflow）、下溢（underflow）或除以0时不会报错：
- 运算结果超过所能表示的数字上限（溢出），结果为Infinity，同样，负值超过范围用-Infinity表示。基于它们的算术运算结果还是Infinity/-Infinity。
- 下溢（underflower）：正值下溢时，返回0，负数下溢时返回-0；
- 非0的数除以0，返回Infinity 或者 -Infinity。  
- 0除以0、无穷大除以无穷大、给负数开方以及运算符与无法转换为数字的操作数一起使用时，两个无穷大-运算，返回NaN。
- NaN和任何值不想等，用 x != x 判断。isNaN()是NaN或者非数字返回true，isFinite()参数不是NaN、infinity、-infinity返回true。
- 0与-0，基本相同，除了作为除数。  

### 3.1.4 二进制浮点数和四舍五入的错误
二进制浮点数表示法不能精确表示类似0.1这样的数。
### 3.1.5 日期与时间
使用Date（）构造函数，用来创建表示日期与时间的对象：
```html
var then = new Date(2011,1,1);
var later = new Date(2011,1,1,17,10,23);
var now = new Date();
now.getDay();
```
## 3.2 文本
字符串是一组由16位值组成的不可变的有序序列，索引从0开始，空字符串长度为0，javascript没有字符型，可以用长度（length)为1来表示。
### 3.2.1 字符串直接量
有单引号或双引号括起来的字符串序列，直接量必须写在一行中，如果分行结尾用\结束，如果有撇号也一定用\转义。  
在客户端javascript中，javascript与html代码中各自使用独立的引号风格。
### 3.2.2 转义字符
反斜线\有着特殊的意义，后面跟一个字符，就不再表示它字面的意思了。比如\' 表示撇号，\n表示换行。
### 3.2.3 字符串使用
javascript内置功能之一就是字符串连接，如果+用于字符串，则表示字符串连接。  

|方法|描述|
|-|--|
|anchor(anchorname)|创建 HTML 锚，锚名anchorname。|
|big()|用大号字体显示字符串。|
|blink()|显示闪动字符串。|
|bold()|使用粗体显示字符串。|
|charAt(index)|返回在指定index索引位置的字符。|
|charCodeAt(index)|返回在指定的位置的字符的 Unicode 编码。|
|concat(str1,str2,...)|连接字符串。|
|fixed()|以打字机文本显示字符串。|
|fontcolor(color)|使用指定的颜色来显示字符串。|
|fontsize(size)|使用指定的尺寸来显示字符串,size=1~7。|
|fromCharCode(numX,...)|	从字符编码创建一个字符串。静态方法|
|indexOf(value,index)|检索字符串。index可选的整数参数。检索开始位置，如省略该参数，则将从字符串的首字符开始检索。|
|italics()|使用斜体显示字符串。|
|lastIndexOf(value,index)|从后向前搜索字符串。|
|link(url)|将字符串显示为链接。|
|localeCompare(target)|用本地特定的顺序来比较两个字符串。如果 stringObject 小于 target，则 localeCompare() 返回小于 0 的数。如果 stringObject 大于 target，则该方法返回大于 0 的数。如果两个字符串相等，或根据本地排序规则没有区别，该方法返回 0。|
|match(str/regexp)|找到一个或多个正则表达式的匹配。|
|replace(regexp/str,str)|替换与字符串或正则表达式匹配的子串。|
|search(str/regexp)|检索与正则表达式相匹配的值。第一个与 regexp 相匹配的子串的起始位置。没有匹配返回-1|
|slice(start，end)|start如果是负数，则该参数规定的是从字符串的尾部开始算起的位置。也就是说，-1 指字符串的最后一个字符，-2 指倒数第二个字符，以此类推。end紧接着要抽取的片段的结尾的下标。若未指定此参数，则要提取的子串包括 start 到原字符串结尾的字符串。如果该参数是负数，那么它规定的是从字符串的尾部开始算起的位置。提取字符串的片断，并在新的字符串中返回被提取的部分。|
|small()|使用小字号来显示字符串。|
|split(separator,howmany)|把字符串分割为字符串数组。howmany可选。该参数可指定返回的数组的最大长度。|
|strike()|使用删除线来显示字符串。|
|sub()|把字符串显示为下标。|
|substr(start,length)|从起始索引号提取字符串中指定数目的字符。start如果是负数，那么该参数声明从字符串的尾部开始算起的位置。length可选。子串中的字符数。必须是数值。如果省略了该参数，那么返回从开始位置到结尾的字串。|
|substring(start，end)|提取字符串中两个指定的索引号之间的字符。start，end非负数，end可选。一个非负的整数，比要提取的子串的最后一个字符在 stringObject 中的位置多 1。如果省略该参数，那么返回的子串会一直到字符串的结尾。|
|sup()|把字符串显示为上标。|
|toLocaleLowerCase()|	把字符串转换为小写。|
|toLocaleUpperCase()|	把字符串转换为大写。|
|toLowerCase()|把字符串转换为小写。|
|toUpperCase()|把字符串转换为大写。|
|toSource()|代表对象的源代码。|
|toString()|返回字符串。|
|valueOf()|返回某个字符串对象的原始值|  

### 3.2.4 模式匹配
Javascript定义RegExp（）函数，用来创建文本匹配模式的对象，这些模式就叫正则表达式。
## 3.3 布尔值
布尔类型只有两个值true、false。Javascript中比较语句的结果通常都是布尔值。布尔值常常用在控制结构中。任何Javascript的值都可以转换成布尔值，下面的值转换成false：
null、undefined、NaN、0、-0、“”,其他值包括对象都会转换成true。  
布尔值有个toString（）方法，返回的是字符串"true"、"false"。同时，由三个操作数"&&"、"||"、"!"。
## 3.4 null和undefined
- null表示一个空值，用typeof运算，返回object，含义是非对象，通常认为null是它自有类型的唯一一个成员，它是一个关键字。
- undefined：表示变量没有初始化，如果查询对象属性或数组元素的值返回undefined表示这个属性或元素不存在。引用没有提供实参的函数形参也只会得到undefined。undefined是一个全局变量，如果用typeof运算返回的值是undefined。
- null和undefined：都表示值的空缺，用"=="运算两者相等，可用"==="来区分，它们转换成布尔值时都为false，同时，它们没有其他属性和方法。
- 可以认为undefined是系统级的，而null是程序级的，如果想把他们赋值给属性和变量，或将他们作为参数传入函数，最佳选择是null。  

## 3.5 全局对象
当javascript解释器启动时，或者任何web浏览器加载网页时，它将创建一个新的全局对象（global object），并给它一组定义的初始属性：
- 全局属性：undefined、infinity、NaN等；
- 全局函数：isNaN（）、isFinite（）、parseInt（）、parseFloat()、eval（）等；
- 构造函数：Date（）、RegExp()、String（）、Object()、Array（）等；
- 全局对象：Math、JSON等  

全局对象可以通过"Global"来找到，对于客户端javascript，Window对象定义一些额外的全局属性。在代码的最顶级可用this来引用全局对象。在客户端javascript中，Window对象充当全局对象，这个全局对象有一个window属性引用自身，它代替this来引用全局对象。Window对象定义了核心全局属性，同时，也定义了针对客户端和浏览器的其他全局属性。  
当初次创建时，全局对象定义了所有的预定义全局值，如果在代码中声明一个全局变量，该变量就是全局对象的一个属性值。
## 3.6 包装对象
数字、布尔值、字符串都有各自的方法，它们通过Number（）、Boolean（）、String（）构造函数，创建一个临时对象,也就是包装对象，这个对象继承它们的属性和方法，它们是只读的，不能创建新的属性与方法，一旦属性和方法使用完，即刻会销毁这个对象，null、undefined没有包装对象。  
通过String（）、Number（）、Boolean（）显示创建对象，与原始值不同，它们能够添加属性与方法，它们与原始值用“==” 判断是true，而用”===“判断是false。
## 3.7 不可变的原始值与可变的对象引用
原始值（undefined、null、布尔值、数字、字符串）与对象（包括数组、函数）有根本区别。原始值不可变，而对象是可变的即可以修改。  
原始值的比较是值比较，而对象的比较不是值的比较，而是引用的比较，只有当引用同一个对象时才相等。
## 3.8 类型转换

|值|字符串|数字|布尔值|对象|
|--|----|---|----|---|
|undefined|“undefined”|NaN|false|throws TypeError|
|null|”null“|0|fasle|throws TypeError|
|true|"true"|1||new Boolean(true)|
|false|"false"|0||new Boolean(false)|
|""||0|false|new String("")|
|"1.2"(数字)||1.2|true|new String("1.2")|
|"one"(非数字)||NaN|true|new String("one")|
|0|"0"||false|new Number(0)|
|-0|"0"||false|new Number(-0)|
|NaN|"NaN"||false|new Number(NaN)|
|Infinity|"Infinity"||true|new Number(Infinity)|
|-Infinity|"-Infinity"||true|new Number(-Infinity)|
|1|"1"||true|new Number(1)|
|[]|""|0|true||
|[9](1个数字元素)|"9"|9|true||
|['a']|使用join（）|NaN|true||
|functin(){}|函数的定义|NaN|true|| |
### 3.8.1 转换与相等性
由于Javascript可以做灵活的类型转换，"=="相等运算符也随相等的含义灵活多变。以下结果都是相等：
```html
null == undefined;//值认为相等
"0" == 0;//字符转换成数字
0 == false；// 布尔值转换成数字
“0” == false // 字符与布尔值都转换成数字
```  
### 3.8.2 显示类型转换
在显示类型转换最简单的方法使用Boolean（）、Number（）、String（）或Object()函数。当不用new运算符时，它们会作为类型转换函数进行转换。  
除了null、undefined之外的任何值都具有toString（）方法，这个方法执行的结果通常和String（）方法的返回结果一致。试图把null、undefined转换成对象，会抛出异常，而使用Object（）方法并不能抛出异常，而是返回空对象。  
- 隐式转换：+运算符一个操作数是字符串，另一个操作数转换成字符串；一元+运算符将操作数转换成数字；一元！将操作数转换成布尔值并取反。
- Number类定义的toString（）可以接受表示转换基数的可选参数。返回的是字符串。
```html
var n = 17;
binary_string = n.toString(2);
```  
- toFixed（）根据小数点后指定的位数转换成字符串；
- toExponenttial（）使用指数记数法将数字转换成字符串，小数点前只有一位，而小数点后的位数有参数指定。
- toPrecision():根据指定的有效位数转换成字符串。如果有效位数小于数字部分，就转换成指数形式。
- parseInt、parseFloat:忽略前导的空格，尽可能解析字符串。“0x” parseInt解析成十六进制。parseInt可以接受第二个参数，这个参数指定数字转换基数。
- Number（）：字符串不能有非数字，否则结果是NaN。
### 3.8.3 对象转换为原始值
- 对象到布尔值转换：所有对象（包括数组、函数）都转换为true。
- 对象到数字和字符串的转换都是调用toString（）或valueOf（）方法来完成。
- toString（）方法：它作用是返回一个反映该对象的字符串，默认的返回值并不有趣。但很多类定义了特定版本：数组toString（）方法将数组元素转换成字符串，并在元素之间添加逗号后合并结果字符串；函数返回的是函数源代码的字符串；日期类返回的日期时间字符串；正则表达式转换为正则表达式直接量。
- valueOf()方法：如果存在原始值，默认将对象转换为表示他的原始值，因为对象是复合值，所以默认的valueOf（）方法简单返回对象本身。数组、函数、正则表达式简单继承了这个默认的方法，而日期对象返回的是1970年1月1日以来的毫秒数。
- 对象到字符串的转换：先调用toString（）方法，返回的原始值如果不是字符串，转换成字符串；对象没有toString（）方法或不能返回原始值，则调用valueOf（）方法，返回原始值，再转换成字符串；如果两个方法都无法返回原始值，则抛出异常。
-  对象到数字的转换：如果对象有valueOf（）方法，返回的原始值如果不是数字，转换成数字；如果不能用valueOf（）不能返回原始值，则调用toString（）返回一个原始值，在转换成数字；两者不能返回原始值就抛出异常。
- 对象到原始值转换，日期调用toString（），而其他先调用valueOf（）。
- +、== 运算符，如果其中有一个操作数是对象，用特殊方法转换成原始值。日期类型是唯一的预先定义类型，它定义了有意义的向字符串和数字类型的转换。  

## 3.9 变量声明
使用一个变量之前应当先声明。使用关键字var来声明，在给它赋值之前，初始值是undefined。
- 变量可以是任意类型。
- 使用var进行重复声明是合法的。
- 试图读取一个没有声明的变量，会报错；给一个没有声明的变量赋值，在严格模式下报错，但，在非严格模式下，会创建一个全局变量（可删除的属性），所以应当始终用var来声明变量。  

## 3.10 变量作用域
一个变量的作用域（scope）是程序源代码中定义这个变量的区域。全局变量拥有全局作用域。在函数内部声明的变量，作用域是局部的，函数参数也是局部的。
函数体内，局部变量优先级高于同名的全局变量。
### 3.10.1 函数作用域和声明提前
Javascript没有块作用域，使用的是函数作用域：变量在它声明的函数体以及在该函数体嵌套的任意函数体中都是有定义的。
### 3.10.2 作为属性的变量
当声明一个全局变量，实际是定义一个全局对象的属性，使用var声明的变量，这个属性是不可配置的，也就是说该属性无法通过delete运算符删除；如果没有使用严格模式给变量赋值，也能自动创建全局变量，以这种方式创建的全局属性是可配置属性，能够删除。这两种有点不同。
### 3.10.3 作用域链（scope chain）
全局变量的全局对象的属性，允许使用this引用全局对象，却没有办法来引用局部变量。局部变量当作跟函数调用的某个相关的对象的属性，该对象称为声明上下文对象。
当定义一个函数时，它将一个作用域链保存在属性的属性[[scope]]中，这个作用域链就是一个对象列表或链表。在顶层代码中，这个作用域链就是全局对象。而嵌套函数的作用域链包含父作用域链（即父声明上下文对象和全局对象），嵌套函数只能在父函数执行时定义。函数执行时，创建一个新对象来保存它的局部变量，并将该对象添加至保存的那个作用域链上，同时创建一个新的更长的表示函数调用作用域的链。  
所以每次调用外部函数是内部函数又会重新定义一次，因为调用外部函数，作用域链是不同的，即内部函数的[[scope]]属性发生变化。
# 4.表达式与运算符
表达式（expression）是Javascript中的一个短语，解释器会将其计算（evaluate）出一个结果。
## 4.1 原始表达式
是表达式的最小单位，包括常量或直接量、变量、关键字，如，常量：3.14、“fgg”；保留字：null、this等；变量：i等。代码中出现标识符，javascript当作变量，如果变量不存在返回值undefined。
## 4.2 对象和数组的初始化表达式
对象与数组初始化表达式实际上是一个新创建的对象与数组，又称对象直接量和数组直接量。
- 数组初始化表达式是通过方括号和其内由逗号隔开的列表构成。初始化结果就是创建一个新数组。
```html
[]
[1,2,3]
[2+3,4+5]
```  
数组初始化的元素可以是任意表达式，数组初始化表达式进行求值时，元素表达式都会各自计算一次，还有元素可以省略，省略元素的值是undefined。数组元素列表可以以逗号结尾，但，不会创建一个新的undefined元素。
- 对象初始化表达式与数组初始化表达式类似，只是方括号被花括号代替，每个元素（子表达式）都包含一个属性名和一个冒号作为前缀。
```html
{};
{x:2.3,y:-1.2}
```  
对象初始化表达式元素也可以是任意表达式，对象直接量中的属性名可以是字符串：
```html
var square = {"upperleft" :{x:p.x,y:p.y},lowerright:{x:p.x+side,y:p.y+side}}
```
## 4.3 函数定义表达式
函数定义表达式的值是这个新定义的函数，可称为函数直接量。函数定义表达式如下：
```html
var spuare = function(){return x*x;}
```  
## 4.4 属性访问表达式
属性访问表达式运算得到一个对象属性或数组元素的值，有两种语法：
1. expression.identifer：表达式后跟随一个句点和标识符，表达式指定一个对象，标识符则指定属性名。
2. expression[expression]  ：方括号类的表达式，是对象的属性名或对象、数组的索引。  

"."与"["之前的表达式，总是会先计算。如果运算结果不是对象（数组），都要转换成对象，如果不能转换成对象，如null、undefined，就会抛出异常。根据句点后标识符查找对象的属性值，并作为整个表达式的值返回。如果对象表达式后是方括号，则会，计算方括号内的表达式值并将它转换成字符串。命名的属性不存在即返回undefind。前一种方法简单，但只适用于访问属性名是合法的标识符，属性名是数字（对于数组来说）、关键字、或者包含空格标点符号的，只能用第二种方式。
## 4.5 调用表达式
Javascript中的调用表达式是一种调用（或者执行）函数或方法，它以函数表达式开始。如果函数表达式的值不是一个可调用的对象，则抛出异常；然后计算参数表达式。如果函数体内没有return语句给出返回值，整个调用表达式的值是undefind。方法调用，用this来指向属于他的对象或数组，而函数的this指向全局对象，严格模式this指向的是undefined。
## 4.6 对象创建表达式
对象创建表达式就是关键字new后面跟着构造函数。如果构造函数没有参数，可以省略括号。
## 4.7 运算符概述
运算符用于算术表达式、比较表达式、逻辑表达式、赋值表达式等。
### 4.7.1 操作数的个数
操作数的个数，优先级从高到底分为：一元运算符、二元运算符和三元运算符。
### 4.7.2 操作数的类型和结果类型
运算符通常会根据需要对操作数进行类型转换
### 4.7.3 左值
表达式只能出现在赋值的左边，自定义函数不能返回左值，但内置函数允许返回左值。
### 4.7.4 运算符的副作用
赋值、++、--、delete运算符有副作用，其他操作符没有副作用；函数调用表达式和对象创建表达式是有副作用的。
### 4.7.5 运算符优先级
一元运算符优先级最高，逗号的最低，但属性访问表达式和调用的表达式的优先级比任何运算符的优先级高。大致如下：一元-》算术-》位移-》关系（比较）-》按位-》逻辑-》三元-》赋值-》逗号。
### 4.7.6 运算符结合性
一元运算符、赋值、三元条件运算符的结合性是从右到左，称为右结合性；其他运算符是左结合性。
### 4.7.7 运算顺序
运算符的优先级和结合性规定了在复杂的表达式中运算顺序，但，没有规定子表达式的运算顺序。但javascript总是从左到右顺序来计算表达式，而且，总是先计算子表达式。
## 4.8 算术表达式
基本算术表达式是：\*、/、%、+、-；运算符/的结果在javascript浮点型，0 / 0是NaN，其他数除以0 ，正数是infinity，负数是-infinity；运算符%通常适用整数，但也适用浮点数,整数取模就是余数，浮点数取模就是不断减第二操作数，直到不够减的余数。
### 4.8.1 “+”运算符
二元加法运算符可以对数字做加法，也可以做字符串连接操作。加法的规则就是优先考虑字符串连接。如果与字符串、数字一起使用，要考虑结合性。
### 4.8.2 一元算术运算符
- 一元加（+）把操作数转换成数字（或者NaN）；
- 一元将（-）根据需要把操作数转换成数字，并改变符号；
- 递增（++）/递减（--）操作数是左值，主要用在循环中。  

### 4.8.3 位运算符
位运算符要求它的操作数是整数，是32位不是64位浮点型。位运算符首先将操作数转换成数字，并将数字强制表示为32位整数。NaN、Infinity和-Infinity都转换成0。
- 按位与（&）、按位或（|）、按位异或（^)、非（~）:逐位执行与、或、异或操作、取反操作；
- 左移（<<）：将第一操作数的所有二进制进行左移操作，左移次数是第二操作数，新的第一位补0，左移相当于乘以2。
- 带符号右移（>>）：将第一操作数的所有二进制进行右移操作，右移次数是第二操作数，右边溢出的位忽略，最高位有原操作数的符号位决定，使结果符号不变。右移相当于除以2（忽略余数）。
- 无符号右移（>>>）：与>>一样，但最高位补0。  

## 4.9 关系表达式
关系表达式返回的结果是布尔值。
### 4.9.1 相等和不等运算符
“==”、“===”是相等运算符和严格相等运算符，而“！=”和“！==”是他们求反。对象的比较是引用的比较，只与对象的自身相等。
严格相等运算符“===”比较规则:
- 两个值类型不等，则不相等；
- 如果有NaN、null或undefined，则不相等；
- 相同的布尔值，相等；
- 两个值是数字，数值相同（包括0和-0），则相等；
- 两个值是字符串，且长度相同，对应位的字符相同，则相等；javascript并不对unicode进行转化，所以，不同编码的字符，显示的字符一样，但不相等。
- 引用指向同一个对象，相等。  

相等运算符"==",比较不严格，如果类型不一致，就先进行类型转换，然后再比较。规则如下：
- 如果类型相同，和严格相等规则一致；
- null与undefined相等；
- 数字与字符串比较，先将字符串转换成数字；
- 布尔值与其他类型比较，先转换成数字；
- 对象与数字或字符串比较，先将对象转换成原始值，再比较。   

### 4.9.2 比较运算符
比较运算符：>、<、>=、<=,只有数字与字符串才能真正比较，其他的就要进行类型转换：
- 对象转换成原始值；
- 原始值不都是字符串，则转换成数字，再比较；
- 0与-0相等；如果一个操作数是NaN ，返回总是false；  

加号运算符与比较运算符行为不同，前者偏爱字符串，后者偏爱数字。
### 4.9.3 in运算符
in运算符希望左操作数是字符串或可以转换成字符串，如果右侧的对象拥有一个名为左操作数值的属性名，表达式为真。
### 4.9.4 instanceof运算符
instanceof运算符左操作数是对象，右操作数是类，如果左操作数是右操作数的一个实例，返回true；其实，右操作数是一个函数。所有的对象都是Object的实例，所以，instanceof运算符也包括对父类的检测。如果，左操作数不是对象返回false，右操作数不是函数，则抛出错误。
## 4.10 逻辑表达式
逻辑运算符'&&'、'||'、'!'的操作数是布尔值或真值(假值)，返回的结果也是布尔值。&&、||具有短路的行为，即计算左操作数的值，如果为true（false），||（&&）不再计算右操作数。
同时，||*运算符最常用的方式是用来从一组备选表达式选出第一个真值表达式*，这种惯用的方式通常用在函数体内，用来给参数提供默认值。
```html
functin copy(o,p)
{
  p = p || {} //如果没有给p传入对象，则使用一个新对象；
}
```  
!运算符总是首先将操作数转换成布尔值。
## 4.11 赋值表达式
赋值表达式的优先级非常低。
带操作数的赋值表达式在大多数情况下，a op= b 与 a = a  op b 是等价的，但，a包含具有副作用的表达式（比如函数调用、赋值操作）时，两者不等价。
## 4.12 表达式计算
javascript可以解释运行有源代码组成的字符串，并产生一个值。是通过全局函数eval（）来完成工作。动态判断代码中的字符串是一种强大的语法特性，但尽量少用。原因是现代javascript解释器不能对调用eval（）函数的函数进行优化与分析。
### 4.12.1 eval（）
eval（）只有一个参数，如果传入参数不是字符串，它直接返回此参数；如果是字符串，当成javascript代码进行编译，失败抛出语法错误，成功则返回最后表达式或语句的值，最后表达式没有值，返回undefined；
